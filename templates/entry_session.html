<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title> Entry Session</title>
   <!-- <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}" />-->
   <!-- <script type="text/javascript" src="{{ url_for('static', filename='example.js') }}" defer></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>
<script>
var entrySession = JSON.parse(localStorage.getItem('entrySession'));
window.onload = function (){
    var results = document.getElementById("sessionTable");
    for (item in entrySession){
         var row = results.insertRow(-1);
         console.log(entrySession[item]);
         for (value in entrySession[item]){
              var cell = row.insertCell(-1);
              cell.innerHTML = entrySession[item][value];
              }
         }
     }
</script>

<body>
    <h1>Real Food Calculator</h1>

    <div class="topnav">
      <nav>
          <a id="home_btn" href="#">Home</a>
          <a id="data_entry_btn" href="#">Data Entry</a>
          <a id="entry_session_btn" href="#">Entry Session</a>
          <a id="view_download_btn" href="#">View/Download Data</a>
          <a id="visualization_btn" href="#">Visualization</a>
      </nav>
    </div>



    <h2>Entry Session</h2>
    <style>
          .button {
                      background-color: red;
                      border: black;
                      padding: 10px 15px;
                      text-align: center;
                      text-decoration: none;
                      display: inline-block;
                      font-size: 14px;
                        border-radius: 5px;
                    }

            .button3 {
                      background-color: green;
                      border: black;
                      padding: 10px 15px;
                      text-align: center;
                      text-decoration: none;
                      display: inline-block;
                      font-size: 14px;
                        border-radius: 5px;
                    }
            .button4 {
                      background-color: gray;
                      border: black;
                      padding: 10px 15px;
                      text-align: center;
                      text-decoration: none;
                      display: inline-block;
                      font-size: 14px;
                        border-radius: 5px;
                    }
        .button:hover {
            background-color: lightcoral;
            cursor: pointer;
        }

        .button3:hover {
             background-color: lightgreen;
            cursor: pointer;

        }
        .button4:hover {
             background-color: lightgrey;
            cursor: pointer;

        }

        table {
            font-family: "Arial", arial, Sans-serif;
            border-collapse: collapse;
            width: 50%;
        }
        th, td {
            border: 1px solid;
            text-align: left;
            padding: 8px;
        }
    </style>

     <button class="button">Add New Item</button>

    <p></p>

    <div>
        Volunteer Name: <input type="text">
        Vendor: <input type="text">
        Date of Entry: <input type="text">

        <h3> March 2019 </h3>


    </div>
<table id="sessionTable">
<tr>
                        <th>Vendor</th>
                        <th>Label/Brand</th>
                        <th>Description</th>
                        <th>Notes</th>
                        <th>Product Code</th>
                        <th>Cost</th>
                        <th>Local Notes</th>
                        <th>Fair Notes</th>
                        <th>Humane Notes</th>
                        <th>Disqualifier Notes</th>

                        </tr>
</table>
    
    <div class="row">

        <div class="container">
            <table class="table table-striped" id="dataTable">
                <thead>
                    <tr>
                        <th>Vendor</th>
                        <th>Label/Brand</th>
                        <th>Description</th>
                        <th>Notes</th>
                        <th>Product Code</th>
                        <th>Cost</th>
                        <th>Local Notes</th>
                        <th>Fair Notes</th>
                        <th>Humane Notes</th>
                        <th>Disqualifier Notes</th>
                        
                        </tr>
                    {% for item in entrySession %}
                       <tr>
                       <td>{item[0]}</td>
                       </tr>
                    {% endfor %}
                </thead>
                

    </table>
    <button class="button3 btn btn-default" id="loadBtn">Submit All</button>

    <script type="text/javascript">
        //info from https://stackoverflow.com/questions/28206654/saving-table-data-to-html5-localstorage and 
        //https://stackoverflow.com/questions/47559534/how-to-put-json-data-into-html-table


        $('#loadBtn').on('click', function() {
            console.log('Here');
//            var jsonData2 = JSON.parse(localStorage.foodData);
            
            
            
            //reading localStorage string and splitting into array format to populate table
            var tempData = localStorage.foodData;
            var ar = tempData.split('/');
            var foodItem = [];
            
            for (var i = 1; i < ar.length; i++){
                foodItem[i - 1] = JSON.parse(ar[i]);
            }
 
            for (var i = 0; i < foodItem.length; i++) {
            //Insert data into HTML table

                //foodItem[i] represents string/array of one individual entry
                console.log(foodItem);
                

                var $tr = $("<tr>");
                var $1 = $("<td>");
                var $2 = $("<td>");
                var $3 = $("<td>");
                var $4 = $("<td>");
                var $5 = $("<td>");
                var $6 = $("<td>");
                var $7 = $("<td>");
                var $8 = $("<td>");
                var $9 = $("<td>");
                var $10 = $("<td>");

                $1.append(foodItem[i][0]);
                $2.append(foodItem[i][1]);
                $3.append(foodItem[i][2]);
                $4.append(foodItem[i][3]);
                $5.append(foodItem[i][4]);
                $6.append(foodItem[i][5]);
                $7.append(foodItem[i][6]);
                $8.append(foodItem[i][7]);
                $9.append(foodItem[i][8]);
                $10.append(foodItem[i][9]);

                $tr.append($1);
                $tr.append($2);
                $tr.append($3);
                $tr.append($4);
                $tr.append($5);
                $tr.append($6);
                $tr.append($7);
                $tr.append($8);
                $tr.append($9);
                $tr.append($10);
            
                $('#dataTable').append($tr);
            }   
        });
        
        
    
    </script>

    
    <button class="button4">Cancel Session</button>
    <!--<button class="button3 btn btn-default" id="loadBtn">Submit All</button>-->
   


</body>

</html>
